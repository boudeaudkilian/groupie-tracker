<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Groupie Tracker - Accueil</title>
    <link rel="stylesheet" href="/static/accueil.css" />
  </head>
  <body>
    <h1>Page d'accueil</h1>
    <h2>De quel groupe voulez vous avoir des information</h2>
    <a href="/search" class="button1">recherche</a>
    <table class="sort-table">  
      <tr>
        <td>
          <a href="#" class="button3" onclick="sortWithSearch('alpha'); return false;">Trier par ordre alphabétique</a>
        </td>
        <td>
          <a href="#" class="button4" onclick="sortWithSearch('alpha-reverse'); return false;">Trier par ordre alphabétique inverse</a>
        </td>
        <td>
          <a href="#" class="button5" onclick="sortWithSearch(''); return false;">Trier par ordre api</a>
        </td>
      </tr>
    </table>
      <table id="main-table">
        {{range $i, $g := .ListGroup}}
            {{if eq (mod $i 5) 0}}
              <tr>
            {{end}}

            <td>
              <table class="grp-table">
                <tr>
                  <td>
                    <a class="a" href="{{$g.Image}}" target="_blank" rel="noopener">
                      <img src="{{$g.Image}}" alt="image non chargée de {{$g.Name}}">
                    </a>
                  </td>
                </tr>
                <tr>
                  <td>
                    <a href="/group?id={{$g.Id}}" class="button2">{{$g.Name}}</a>
                  </td>
                </tr>
              </table>
            </td>

            {{if eq (mod $i 5) 4}}
                </tr>
            {{end}}
        {{end}}

        {{if ne (mod (len .ListGroup) 5) 0}}
            </tr>
        {{end}}
      </table>
    <script>
      function sortWithSearch(sortType) {
        const urlParams = new URLSearchParams(window.location.search);
        const searchParam = urlParams.get('search');
        
        let newUrl = '/';
        const params = [];
        
        if (searchParam) {
          params.push('search=' + encodeURIComponent(searchParam));
        }
        
        if (sortType) {
          params.push('sort=' + sortType);
        }
        
        if (params.length > 0) {
          newUrl += '?' + params.join('&');
        }
        
        window.location.href = newUrl;
      }
    </script>
  </body>
</html>
